FORMAT: 1A
HOST: http://polls.apiblueprint.org/

FORMAT: 1A
HOST: https://app.recruitis.io/api2/



# Recruitis.io
* Verze systému: **1.2**
* Poslední aktualizace: **6.8.2018**

API dokumentace pro systém Recruitis.io (http://recruitis.io).
Dokumentace je založena na autorizaci pomocí tokenu, který je vygenerován buď samotným systémem nebo uživatelem v systému Recruitis.

Zdrojové kódy k dokumentaci jsou volně přístupné zde: https://github.com/PavelVais/RecruitisAPI

Postupem času budou příbývat jednotlivé funkcionality. Pokud by měla být narušena funčnost jakéhokoli API volání, 
bude založen nový branch (v2 atd.), nebo budete v dostatečném časovém odstupu o změně informováni.

## Changelog

 * **6.8.2018: branch v1 `1.2`**
    * Přidána sekce **Filters**
    * Zprovozněn parametr filter_id u volání `GET /jobs`
    * U volání `POST /answer`  přibyl parametr `referral_id`, `channel_id` a `extra`, který dovoluje přidat k odpovědi poznámku nebo tag.
    * U volání `POST /answer`  byl zprovozněn parametr `channel_id` 
    * U volání `POST /answer`  byl upraven parametr `gppr_agreements` - Nyní je rozšířen o další atributy 
    * Volání `GET /enums/filters` je označeno jako deprecated. Namísto toho se doporučuje volat `GET /filters`
 
 * **19.7.2018: branch v1 `1.1.1`**
    * Zprovozněn parametr channel_id u volání `GET /jobs`
    * Do odpovědi `GET /jobs` přibyly tyto položky: `description` a `workfields`
    * Opraven parametr channel_assignation u volání `GET /enums/workfields`
    * Přidáno vynucení správných typů tokenů u volání `GET /enums/workfields` a `GET /jobs`
    * Standartizovány některé kódové označení chyb + jsou zveřejněny a popsány v dokumentaci
    * V dokumentaci jsou připsány další dodatečné informace o API
 
 * **9.7.2018: branch v1 `1.1`**
    * Zprovozněno volání nad realnými daty na url adrese: `https://app.recrutis.io/api2/`
    * `GET /jobs` odstraněn parametr `regions`. Na místo něho se bude využívat parametr `office_id`. Filtrace podle lokality není v nejblížším plánu vývoje.
    * `GET /jobs` parametr `workfields` přejmenován na `workfield_id` (zpětná kompatibilita je zachována.)
    * `GET /jobs` přidán parametr `office_id`
    * Přidáno volání `GET /enums/offices`
    * volání `GET /enum/*` přejmenováno na `GET /enums/*`. (zpětná kompatibilita je zachována: stále se dá volat `enums`)
    * Plánuje se v nejbližší době: zprovozněno volání na `https://api.recrutis.io/` (volání na https://app.recrutis.io/api2/ bude zachováno)

 * **18.6.2018: branch v1 `1.0.1`**
    * `POST /Answers` nyní přijíma parametr `attachment` `base64`. V této návaznosti je nyní povinný atribut `attachment` `filename`.

 * **4.5.2018: branch v1 `1.0.0`**
    * Ustálená verze API volání `jobs` , `answers` a `login`
    * Počáteční verze


## Tokeny
Autorizační tokeny mají dvě úrovně:
+ `full_access` : Token, který má veškeré pravomoce a umožňuje upravovat data v systému dané firmy.
Tento token nesmí být jakkoli zobrazen veřejnosti.
+ `public_access` : Token, který má převážně zobrazovací pravomoce. Tento token může být veřejnosti zobrazen. Například při použití Javascriptu.

Na oba druhy tokenů lze uplatnit doménový whitelist. (Toto nastavení doporučujeme použít.)

Tokeny lze vytvořit po přihlášení v Recrutisu: *nastavení* > *api propojení*. (https://app.recruitis.io/zadavatel/nastaveni)

Samotná autorizace probíhá pomocí header informace `Authorization`, kde je slovní spojení `Bearer` a následně vložený token

`Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6`

###Meta informace

Každá `response` má `meta` sekci, která dodává veškeré pomocné informace. Níže vypsané atributy nemusí vždy v meta sekci být a mohou být podmíněny 
okolnostmi volání. (`entries_*` údaje se v meta sekci zobrazí jen při vrácení pole payloadu apod.)

| META parameter  | Note
|:----------------|------------|
| `code`          | Kód výsledku. V případě chyby je to standartizované hlášení o chybě.
| `message`       | Zpráva, která popisuje dané volání.  
| `duration`      | Uplynulá doba při zpracování požadavku.
| `cached`        | Výsledek je cachován a nemusí být aktuální.  
| `cached_from`   | Čas vygenerování vráceného výsledku
| `deprecated`    | Dané volání je ozančeno jako zastaralé a nemělo by se nadále používat.
| `entries_from`  | Pokud se vrací pole, značí od kterého elementu dané pole je (*určeno pro stránkovač*)
| `entries_to`    | Pokud se vrací pole, značí do kterého elementu dané pole je (*určeno pro stránkovač*)
| `entries_total` | Pokud se vrací pole, značí celkové množství elementů (*určeno pro stránkovač*) 
| `entries_sum`   | Pokud se vrací pole, značí aktuální množství elementů (*určeno pro stránkovač*)

### Popis `code` stavů

Každá odpověď má nějaký kód. Zde je jejich výčet a jejich popis.

| CODE parameter                                   | Note
|:-------------------------------------------------|--------------------------------|
| `api.ok`                                         | Dotaz proběhl úspěšně. 
| `api.found`                                      | Dotaz našel výsledek a poslal zpět.
| `api.created`                                    | Dotaz vytvořil entitu
| `api.deleted`                                    | Dotaz smazal entitu
| `api.modified`                                   | Dotaz upravil entitu
| `api.unmodified`                                 | Dotaz nic nového neprovedl, vrátil již existující entitu.
| `api.response.null`                              | Dotaz proběhl úspěšně, ale nebyl vrácen žádný výsledek. 
| `api.error.generic`                              | Obecná chyba. Nespecifikovatelná.
| `api.error.request.wrong_format`                 | Špatný JSON formát requestu.
| `api.error.request.property.missing`             | V požadavku chybí vyžadovaná hodnota.
| `api.error.request.property.wrong_value`         | V požadavku nabívá proměnná špatnou hodnotu. 
| `api.error.not_found`                            | Dotaz směřuje na neexistující požadavek. 
| `api.error.unauthorized`                         | Dotaz vyžaduje přihlášení.
| `api.error.authorization.low_privileges`         | Dotaz vyžaduje přihlášení přes `full_access` token.
| `api.error.authorization.blocked`                | Přihlášení je na nějakou dobu zablokováno. Je možné, že se uživatel přihlašoval častějí špatnými údaji. 
| `api.error.authorization.wrong_token_format`     | Bearer token je špatného formátu.
| `api.error.authorization.token.doesnt_exists`    | Daný bearer token neexistuje. 
| `api.error.authorization.wrong_credentials`      | Vložené údaje jsou špatné, Přihlášení se nezdařilo. 
| `api.error.authorization.bad_domain`             | API je voláno z nepovolené domény.
| `api.error.account.deleted`                      | Účet, na který se snažíte přihlásit, byl smazán. 
| `api.error.account.banned`                       | Účet, na který se snažíte přihlásit, byl zablokován (trvale). 
| `api.error.upload.generic`                       | Nastala chyba při uploadování přílohy. 
| `api.error.upload.size`                          | Příloha má více, než 3MB.
| `api.error.upload.timeout`                       | Vypršela doba pro stáhnutí souboru z externího uložiště. Soubor není dostupný.
| `api.error.upload.bad_host`                      | Snažíte se uploadovat soubor, který neexistuje. 
| `api.error.upload.no_data`                       | Snažíte se uploadovat soubor, který neexistuje. 
| `api.error.user.already_answered`                | Daný uchazeč již na inzerát odpověděl


## Volání dotazů - dodatečné informace
### Parametry

Pokud je v dokumentaci označen parametr jako `array`, poté systém očekává, že se dostaví daný parametr v url adrese jako jedna hodnota (`foo=bar`)
nebo jako pole (`foo[]=bar&foo[]=baz`). 

#Group Authentication

## Login [/login]

### Login [POST]

Login request for user authentication. Default response is 200. 

 - `device_id` je ID vygenerováno firebase službou od Google inc. Pokud systém obrdží tento parametr,
 umožní přes tento login posílat SMS zprávy a systém počítá s tím, že se jedná o mobilní aplikaci.
- `device_name` je pouze označení daného api spojení. Pod tímto názvem ho pak uživatel uvidí v Recruitisu. Jednou,
jak se device_name zapíše, nelze přes API volání změnit.

Tato funkce není třeba volat, pokud již máte Token vygenerovaný. **Tato funkce vrací token s vlastností `full_access`.**

| Request value        | Required | Note |
|:----------------------|--------|----------------------|
| `password`            | Yes    |
| `username`            | Yes    |
| `device_id`           | No     |
| `device_name`         | No     |

#### Requirements

   + No Authorization is needed

+ Request 

        {
            "password":"heslo",
            "username":"user@test.cz",
            "device_id": "efee4554959cecejo",
            "device_name": "Samsung S8",
            
        }
        
+ Response 200 (application/json)

        {
          "payload": {
            "token": "68b0c063374ac7fe0abaa18342dbad23168876a1.8699.3e398f0ccd4c857b29de10397534afac",
            "device_id": "x56sj64uzr4we64rtb489uzjj186drgv13e",
            "device_name": "restapiklient"
          },
          "meta": {
            "duration": "2259.39",
            "total_duration": 2300,
            "code": 200,
            "message": "",
            "message_localized": "Přihlášení proběhlo v pořádku"
          }
        }
  
+ Response 404 (application/json)
       
        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 330,
            "code": "api.error.authentication",
            "message": "Vložené údaje nesouhlasí."
          }
        }

#Group Me

## My account information [/me]

### Me [GET]

Získání informací o právě přihlášeném účtu.

+ Request
    + Headers
    
            Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6

+ Response 200 (application/json)

        {
          "payload": {
            "fullname": "Michal Macinka",
            "email": "foo@bar.com",
            "img_src": "http://lide.uhk.cz/fim/student/macinmi1/avatar_2.jpg",
            "device_id": "x56sj64uzr4we64rtb489uzjj186drgv13e",
            "device_name": "restapiklient"
          },
          "meta": {
            "duration": "2259.39",
            "total_duration": 2300,
            "code": "api.ok",
            "message_localized": "Údaje byly nalezeny."
          }
        }


+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }

# Group Jobs
API volání, které se vstahuje k aktivním inzerátům


## Jobs Lists [/jobs{?limit,page,workfield_id,office_id,filter_id,channel_id}]

    
### Get All Jobs [GET]

Získání všech inzerátů. Ty se dají filtrovat podle oborů (profesí), filtrů a distribučních kanálů. 


#### Requirements

   + Authorization with token
   + token type: `public_access` : pokud se jedná o veřejný inzerát (vystaven na firemních stránkách,xml nebo na pracovních portálech) - (určení dle channel_id)  
   + token type: `full_access` : pokud se jedná o interní inzerát. (určení dle channel_id)  

+ Request
    + Headers
    
            Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6

+ Parameters
    + limit (optional,numeric,`10`) - pocet entit, ktere se maji zobrazit
    + page (optional,numeric,`1`) - strana s vypisem odpovedi
    + workfield_id (optional,array[int]) - Omezení na určité pracovní obory, profese
    + office_id (optional,array[int]) - Omezení na určité pobočky. Viz sekce Enumerations
    + filter_id (optional,array[int]) - Omezení na určité filtry. Viz sekce Job Filters
    + channel_id (optional,array[int]) - Omezení na určité kanály. Viz sekce Enumerations
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "job_id": 123456,
              "active": true,
              "date_created": "2017-03-23 17:42:10",
              "title": "Android Developer",
              "source": "PRACEvCR.cz",
              "personalist": {
                "name": "Tomáš Krátký",
                "id": 12345
              },
              "filterlist": [
                {
                  "id": "5",
                  "name": "Jednosměnný",
                  "group": "Typ provozu"
                },
                {
                  "id": "7",
                  "name": "Marketing",
                  "group": "oddělení"
                }
              ],
              "workfields": [
                {
                  "id": 20,
                  "name": "Personalistika a HR"
                }
              ],
              "employment": {
                "id": 1,
                "name": "Práce doma"
              },
              "addresses": [
                {
                  "state": "CZ",
                  "region": "Královehradecký kraj",
                  "city": "Hradec Králové",
                  "street": "Třída ČSA 517",
                  "postcode": 50011
                }
              ],
              "stats": {
                "views": 92,
                "answers": 8,
                "flow_answers": [
                  {
                    "flow": 0,
                    "value": 9
                  },
                  {
                    "flow": 1,
                    "value": 1
                  },
                  {
                    "flow": 2,
                    "value": 0
                  },
                  {
                    "flow": 3,
                    "value": 0
                  },
                  {
                    "flow": 4,
                    "value": 1
                  },
                  {
                    "flow": 5,
                    "value": 0
                  },
                  {
                    "flow": 6,
                    "value": 0
                  },
                  {
                    "flow": 7,
                    "value": 0
                  },
                  {
                    "flow": 8,
                    "value": 0
                  },
                  {
                    "flow": 9,
                    "value": 0
                  },
                  {
                    "flow": -1,
                    "value": 0
                  }
                ]
              }
            },
            {
              "job_id": 123456,
              "active": true,
              "date_created": "2017-03-23 17:42:10",
              "title": "Android Developer",
              "source": "PRACEvCR.cz",
              "personalist": {
                "name": "Tomáš Krátký",
                "id": 12345
              },
              "workfields": [
                {
                  "id": 20,
                  "name": "Personalistika a HR"
                }
              ],
              "employment": {
                "id": 1,
                "name": "Práce doma"
              },
              "addresses": [
                {
                  "state": "CZ",
                  "region": "Královehradecký kraj",
                  "city": "Hradec Králové",
                  "street": "Třída ČSA 517",
                  "postcode": 50011
                }
              ],
              "stats": {
                "views": 92,
                "answers": 8,
                "flow_answers": [
                  {
                    "flow": 0,
                    "value": 9
                  },
                  {
                    "flow": 1,
                    "value": 1
                  },
                  {
                    "flow": 2,
                    "value": 0
                  },
                  {
                    "flow": 3,
                    "value": 0
                  },
                  {
                    "flow": 4,
                    "value": 1
                  },
                  {
                    "flow": 5,
                    "value": 0
                  },
                  {
                    "flow": 6,
                    "value": 0
                  },
                  {
                    "flow": 7,
                    "value": 0
                  },
                  {
                    "flow": 8,
                    "value": 0
                  },
                  {
                    "flow": 9,
                    "value": 0
                  },
                  {
                    "flow": -1,
                    "value": 0
                  }
                ]
              }
            },
            {
              "job_id": 123456,
              "active": true,
              "date_created": "2017-03-23 17:42:10",
              "title": "Android Developer",
              "source": "PRACEvCR.cz",
              "personalist": {
                "name": "Tomáš Krátký",
                "id": 12345
              },
              "workfields": [
                {
                  "id": 20,
                  "name": "Personalistika a HR"
                }
              ],
              "employment": {
                "id": 1,
                "name": "Práce doma"
              },
              "addresses": [
                {
                  "state": "CZ",
                  "region": "Královehradecký kraj",
                  "city": "Hradec Králové",
                  "street": "Třída ČSA 517",
                  "postcode": 50011
                }
              ],
              "stats": {
                "views": 92,
                "answers": 8,
                "flow_answers": [
                  {
                    "flow": 0,
                    "value": 9
                  },
                  {
                    "flow": 1,
                    "value": 1
                  },
                  {
                    "flow": 2,
                    "value": 0
                  },
                  {
                    "flow": 3,
                    "value": 0
                  },
                  {
                    "flow": 4,
                    "value": 1
                  },
                  {
                    "flow": 5,
                    "value": 0
                  },
                  {
                    "flow": 6,
                    "value": 0
                  },
                  {
                    "flow": 7,
                    "value": 0
                  },
                  {
                    "flow": 8,
                    "value": 0
                  },
                  {
                    "flow": 9,
                    "value": 0
                  },
                  {
                    "flow": -1,
                    "value": 0
                  }
                ]
              }
            }
          ],
          "meta": {
            "code": "api.found",
            "count": 3,
            "message": "Inzeráty byly nalezeny."
          }
        }

+ Response 404 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 330,
            "code": "api.error.jobs.notfound",
            "message": "Inzeráty nebyly nalezeny"
          }
        }


## Job Detail [/jobs/{id}]

   
### Get Jobs Detail [GET]

#### Requirements

   + Authorization with token
   + token type: `public_access` : pokud se jedná o veřejný inzerát (vystaven na firemních stránkách,xml nebo na pracovních portálech)
   + token type: `full_access` : pokud se jedná o interní inzerát.

#### Zobrazení parametru závisících na druhu tokenu
   
   | Parameter      | token           | Note                 |
   |:---------------|-----------------|----------------------|
   | `stats`        | `full_access`   |
   | `edit_link`    | `full_access`   |

+ Request
    + Headers
    
            Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6

+ Parameters
    + id (number, `1`) - Job id



+ Response 200 (application/json)

        {
          "payload": [
            {
              "job_id": 123456,
              "title": "Android Developer",
              "last_updated": "2017-11-13 15:53:01",
              "date_created": "2017-01-30 15:14:00",
              "date_end": "2019-01-30 15:14:00",
              "description": "Jste maminka na mateřské dovolené, která opustila svět personalistiky tělem avšak rozhodně ne duší? Je pro Vás důležité trávit co nejvíce času s rodinou, ale zároveň si nechcete nechat ujít nové trendy v HR, aby pro Vás návrat do světa dění nebyl tak těžký? Pak Vám nabízíme příležitost, jak vše při mateřské skloubit a navíc si přivydělat! &lt;img src=&quot;http://recruitis.io/mam.jpeg&quot; class=&quot;img-responsive center&quot; alt=&quot;maminka s duší personalistky&quot;&gt;[/mujstyl] Jaká byste měla být: Personalistika je Vaší profesí a nebo alespoň velkou vášní S kolegy v oboru se ráda dělíte o užitečné novinky a hlavně o dobrou energii Skype meetingy jsou pro Vás přirozeným komunikačním prostředkem Je radost s Vámi komunikovat Trendy v HR Vás zajímají a chcete zůstat #intouch Co můžete čekat od nás: Práci z pohodlí domova Flexibilní formu spolupráce Podporu od týmu mladých pohodářů zapálených pro HR a moderní technologie [mujstyl]Zašlete nám Váš kontakt, dáme Skype nad šálkem kávy a povíme si víc. Budeme se těšit",
              "source_site": "PRACEvCR.cz",
              "personalist": {
                "name": "Tomáš Krátký",
                "id": 12345
              },
              "contact": {
                "name": "Radim Velezeba",
                "email": "foo@bar.cz",
                "phone": 123456
              },
              "workfields": [
                {
                  "id": 20,
                  "name": "Personalistika a HR"
                }
              ],
              "addresses": [
                {
                  "state": "CZ",
                  "region": "Královehradecký kraj",
                  "city": "Hradec Králové",
                  "street": "Třída ČSA 517",
                  "postcode": 50011
                }
              ],
              "stats": {
                "views": 92,
                "answers": 8
              },
              "ztp": {
              },
              "employment": {
                "id": 1,
                "name": "Práce doma"
              },
              "education": {
                "id": -1,
                "name": "Vzdělání není podstatné"
              },
              "active": true,
              "public_link": "http://ceskytrhprace.pracevcr.cz/detail/347677-mamca-s-dusi-personalistky",
              "edit_link": "http://pracevcr.cz/zadavatel/inzerat/novy/iid347677/sid07ec2194ec509104427c0a4da7955bc8"
            }
          ],
          "meta": {
            "code": "api.ok",
            "count": 1,
            "message": "Inzerát byl nalezen."
          }
        }

        
+ Response 404 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 330,
            "code": "api.response.null",
            "message": "Inzerát nebyl nalezen"
          }
        }

+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }

# Group Answers
API calls for actions connected with answers.

## Answers list [/answers]

### Create new answer [POST]
Procedura na uložení nové odpovědi. Jako odpověď se vrátí ID odpovědi. 

API nepodporuje vložení duplikátních odpovědí. Pokud (dle emailu nebo telefonu) již uchazeč
na daný inzerát odpovídal, vrátí se jeho answer ID s kódem: `meta`.`code` = `api.unmodified`

Poznámka: Souhlas se zpracováním osobních údajů dostává takto vytvořená odpověď automaticky. Její platnost je v základním nastavení 1 rok. Pokud byste si přáli toto nastavení změnit, kontaktujte nás. 

#### Requirements

   + Authorization with token
   + token type: `public_access` : pokud se jedná o veřejný inzerát (vystaven na firemních stránkách,xml nebo na pracovních portálech)
   + token type: `full_access` : pokud se jedná o interní inzerát.    
   
| Request value        | Required | Default Value | Note |
|:----------------------|--------|:------:|----------------------|
| `job_id`              | Yes    |        |
| `name`                | Yes    |        |
| `email`               | No     |        |
| `phone`               | No     |        |
| `source_id`           | No     | -1     | Zdroj, odkud odpověď přišla. Více u volání `GET \enums\channels`
| `referral_id`         | No     |        | ID referrala (ID získané z Recruitis referral stránky, API pro referraly je v plánu)
| `cover_letter`        | No     |        |
| `gdpr_agreement`      | No     |        | Pokud je objekt uveden, k odpovědi se přidá i GDPR souhlas o zařazení do databáze uchazečů pro danou firmu.
| `gdpr_agreement` - `date_expiration`    | No     | 1 year from now  |  formát YYYY-MM-DD
| `gdpr_agreement` - `source`             | No     | "manual"         | Stringové označení, odkud byl GDPR souhlas pořízen.
| `gdpr_agreement`           | No    |    |
| `attachments`              | No    |    | Velikost souboru nesmí přesáhnout 3MB.
| `attachment` - `path`      | Yes   |    | Atribut `path` nebo `base64` je vyžadován. Ujistěte se, že je soubor dostupný z jiné domény. 
| `attachment` - `base64`    | Yes   |    | Atribut `path` nebo `base64` je vyžadován. Data souboru vs base64 formátu.
| `attachment` - `filename`  | Yes   |    | Název souboru. Musí obsahovat koncovku a čitelný znaky. Mezery budou nahrazeny podtržítkem.
| `attachment` - `type`      | No    | 1  |  @see Enumeration section
| `extra`                    | No    |    |  Pole objektů, které přiřadí k odpovědi poznámku, nebo tag.
| `extra` - `note`           | Yes   |    |  Atribut `note` nebo `tag` je vyžadován. Pokud je určeno, uloží se hodnota jako poznámka. **Maximální délka poznámky je 800 znaků**
| `extra` - `tag`            | Yes   |    |  Atribut `note` nebo `tag` je vyžadován. Pokud je určeno, uloží se hodnota jako tag k uchazeči. **Maximální délka poznámky je 100 znaků**


#### Typy příloh (Attachment type)

| Value  |  Note                             |
|:-------|-----------------------------------|
| `1`    | Příloha bez zaměření       
| `2`    | CV příloha       
| `3`    | Emailová korespondence (obsolete)       
| `4`    | Fotografie       
| `5`    | GDPR souhlas       

+ Request
    + Headers
    
            Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6


+ Request  (application/json)

        {
          "job_id": 123456,
          "source_id": 1,
          "name": "Pavel Test",
          "email": "foo@bar.com",
          "phone": 123456678,
          "cover_letter": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce porttitor consequat augue, eu porttitor ex blandit sit amet. Morbi sed lorem lorem. In aliquet cursus nunc, ut porttitor orci viverra non. Aenean ultrices vestibulum venenatis. Nullam facilisis justo ut tincidunt elementum. Praesent molestie nibh libero, eget efficitur odio interdum vel. Suspendisse augue ipsum, scelerisque eget massa non, pellentesque vehicula augue. Cras mollis vehicula pharetra. Phasellus neque nisi, facilisis nec dui in, bibendum lacinia leo",
          "gdpr_agreement": {
            "date_expiration": "2020-10-31",
            "source": "elektronická forma"
          },
          "extra" : [
            {
              "note" : "Toto je text, který se uloží jako poznámka k danému uchazečovi"
            },
            {
              "tag" : "Toto je uchazečův tag"
            }
          ],
          "attachments": [
            {
              "path" : "http://www.example.com/upload/cv.txt",
              "filename": "cv.txt",
              "type": 1
            },
            {
              "base64" : "iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABI1BMVEX////9/v/1+vz7/f75/P3b6/WTw+JUoNF3tNrs9fqgy+XL4vGt0ekihcMdgsJWodHW6PRnq9anzuf+//98ttwnh8XJ4fDA3O5BlsyEu96WxeM+lMvf7fa11usyjshcpdPu9vrl8fhhqNQsisZGmc242OwvjMc2kMnQ5fLx9/vs9PrF3+8egsKYxuNIms5ToNHt9fr4+/1zstkkhsS01eu21+tbpNPz+fzy+PtYo9IhhMOu0um72e0lhsTr9Pl0stmKvt/o8vlAlswpicXH4PBMnM/w9/umzud7ttuOwOCq0Oh+uNwqicbO5PJ5tds9lMvm8fh9t9xSn9D0+fz8/v6eyuV6tduIvd/U5/QrisaSw+JEmM1srteeyeXP5fKjzObB3e67gPv3AAAAAWJLR0QAiAUdSAAAAAd0SU1FB98MCxI0KKxwQkkAAADqSURBVDjLxdLJUsJQFATQlwRUUFsQAjKriAEMCDKqjE6As0wqAvL/XwEW69DZUPbqLk513ffqCvGvkWRlOVisspGRNza3rH+Dzb5tWLSzC+zZhHA4912GyA1A9QjvgU8xXsm/QIFgKBw5XLH30XH0JBY61eIrX5dwJM80PcU+IZjGeYaY7AVyeVZUUFEsEVO+xNU1K6pUka4RI9WBBitq3uDWw9CdivsHhlpAmxnRgf5I0ROeXyh6xds7RR/o9ihqwNmnaIAhNSKmf3L09T3iKPPj50gam0BiQs97kemvCZSYmUBSzWVCrTdzroQWUBRujJsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMTFUMTg6NTI6NDArMDE6MDCHteiRAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE1LTEyLTExVDE4OjUyOjQwKzAxOjAw9uhQLQAAAFd6VFh0UmF3IHByb2ZpbGUgdHlwZSBpcHRjAAB4nOPyDAhxVigoyk/LzEnlUgADIwsuYwsTIxNLkxQDEyBEgDTDZAMjs1Qgy9jUyMTMxBzEB8uASKBKLgDqFxF08kI1lQAAAABJRU5ErkJggg==",
              "filename": "logo.jpg",
              "type": 4

            },
            {
              "path" : "http://www.example.com/upload/gdpr_agreement.pdf",
              "filename": "souhlas.pdf",
              "type": 5
            }
          ]
        }

+ Response 201 (application/json)

        {
          "payload": {
            "id": 1
          },
          "meta": {
            "duration": 2259,
            "code": "api.created",
            "message_localized": "Answer was created."
          }
        }
        
+ Response 400 (application/json)
        
        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 330,
            "code": "api.error.generic",
            "message": "Can't upload attachment."
          }
        }

# Group Job filters

Toto je specifická oblast, ve které pracujeme s filtry pro konkrétní inzeráty. Mnohdy chceme inzeráty filtrovat podle údajů, které
nám systém nenabízí, tak si je musíme sami vytvořit a k inzerátu přiřadit. Následně je můžeme podle nich filtrovat. 

Příklad filtru: 
 - Oddělení v nemocnici (JIP, Gynekologie, ORL..)
 - Typy provozu (jednosměnný, dvousměnný...)
 
Jeden inzerát může mít u sebe více filtrů, tohle už záleží pouze na personalistovi, který inzerát tvoří.


## Filters List [/filters{?id,group}]

Vrátí seznam filtrů, které je možné dle ID přiřazovat a filtrovat u inzerátů.
*tato funkce je totožná s funkcí GET `enums/filters`*

    
### Get Filters [GET]

Získá všechny naše profese a obory včetně jejich ID.

#### Requirements

   + Authorization with token
      + token type: `public_token` 

+ Request
    + Headers
    
            Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6

+ Parameters
    + group (optional,array[string]) - Vyfiltruje pouze seznam filtrů k dané skupině.
    

+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": "6",
              "name": "Ošetřovna",
              "group": "oddělení"
            },
            {
              "id": "7",
              "name": "Gynekologie",
              "group": "oddělení"
            },
            {
              "id": "8",
              "name": "ORL",
              "group": "oddělení"
            },
            {
              "id": "5",
              "name": "Jednosměný",
              "group": "Smanný provoz"
            },
            {
              "id": "9",
              "name": "Dvousměnný",
              "group": "Smanný provoz"
            },
            {
              "id": "12",
              "name": "Nepřetržitý",
              "group": "Smanný provoz"
            }
          ],
          "meta": {
            "duration": 320,
            "code": "api.found",
            "message": "Filter enumeration is returned."
          }
        }
        
    
### Creating new filter [POST]

Vytvoření nového filtru.

| Request value         | Required | Type     | Default Value   | Note               |
|:----------------------|----------|----------|:-------------:|----------------------|
| `name`                | Yes      | string   | | Název filtru
| `group`               | Yes      | string   | | Název skupiny, do které se filtr automaticky zařadí

+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": "6",
              "name": "Ošetřovna",
              "group": "oddělení"
            },
            {
              "id": "7",
              "name": "Gynekologie",
              "group": "oddělení"
            },
            {
              "id": "8",
              "name": "ORL",
              "group": "oddělení"
            },
            {
              "id": "5",
              "name": "Jednosměný",
              "group": "Smanný provoz"
            },
            {
              "id": "9",
              "name": "Dvousměnný",
              "group": "Smanný provoz"
            },
            {
              "id": "12",
              "name": "Nepřetržitý",
              "group": "Smanný provoz"
            }
          ],
          "meta": {
            "duration": 320,
            "code": "api.found",
            "message": "Filter enumeration is returned."
          }
        }
        

### Updating existing filter [PUT]

Editace filtru dle ID v parametru URI.

| Request value         | Required | Type     | Default Value  | Note               |
|:----------------------|----------|----------|:--------------:|----------------------|
| `name`                | Yes      | string   | | Název filtru
| `group`               | Yes      | string   | | Název skupiny, do které se filtr automaticky zařadí

+ Parameters
    + id (required, number, `1`) - Filter ID

+ Response 201 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 330,
            "code": "api.modified",
            "message": "Filter was modified."
          }
        }
        
### Delete existing filter [DELTE]
        
Smaže filtr dle ID v parametru URI.

+ Parameters
    + id (required, number, `1`) - Filter ID

+ Response 200 (application/json)

        {
          "payload": {
            "count": 1
          },
          "meta": {
            "duration": 2259,
            "code": "api.deleted",
            "message_localized": "Filter was deleted."
          }
        }

# Group Enumerations

Sekce, která má za úkol vracet různé druhy číselníků. Na všechny číselníky se nevztahuje stránkování.


## Workfields Lists [/enums/workfields{?lang}]

Workfields neboli obory a profese používané v Recruitis.io systému.

    
### Get Workfields [GET]

Získá všechny naše profese a obory včetně jejich ID.

#### Requirements

   + No Authorization is needed

+ Parameters
    + lang (optional,string,`cs`) - Jazyk, ve kterém se mají obory vrátit. (momentálně je podporována pouze čeština)
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": 1,
              "name": "Administrativa",
              "professions": [
                {
                  "id": 101,
                  "name": "Administrativní pracovník, referent"
                },
                {
                  "id": 102,
                  "name": "Archivář, správce rejstříku"
                }
              ]
            },
            {
              "id": 2,
              "name": "Bankovnictví a finanční služby",
              "professions": [
                {
                  "id": 201,
                  "name": "Compliance specialista"
                },
                {
                  "id": 202,
                  "name": "Custody specialista"
                }
              ]
            }
          ],
          "meta": {
            "duration": 2259,
            "code": "api.ok",
            "message_localized": "Obory byly nalezeny."
          }
        }
        
        
## Company Workfields Lists [/enums/workfields{?lang,channel_assignation}]


### Get Workfields Used In Jobs [GET]

Získá všechny profese, které jsou obsaženy v inzerátech dané společnosti. Někdy nemusí sedět počet (`count`) oborů při 
součtu `count` podřadných profesí. Je to tím, že mohou mít inzeráty návaznost pouze na obor, nikoliv i na profesi.

*Pro upřesnění: Profese jsou podmnožinou jednotlivých oborů.*

#### Requirements

   + Authorization with token
   + token type: `public_token` : pokud se jedná o dotaz na veřejné inzeráty (vystaveny na firemních stránkách, xml nebo na pracovních portálech)
   + token type: `full_access` : pokud se jedná o dotaz na získání oborů pro interní inzeráty. 
   + Alespoň jeden typ tokenu je tedy vyžadován ve chívli, kdy použijete parametr `channel_assignation`
   
+ Request
    + Headers
    
            Authorization: Bearer 30bcaf299e100318906fef2f442505216fa28af1.11196.99382ec77e2a79ac2af2671730817ec6   

+ Parameters
    + lang (optional,string,`cs`) - Jazyk, ve kterém se mají obory vrátit. (momentálně je podporována pouze čeština)
    + channel_assignation (array[int],``)
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": 1,
              "name": "Administrativa",
              "professions": [
                {
                  "id": 101,
                  "name": "Administrativní pracovník, referent",
                  "count": 4
                }
              ],
              "count" : 4
            },
            {
              "id": 2,
              "name": "Bankovnictví a finanční služby",
              "professions": [
                {
                  "id": 201,
                  "name": "Compliance specialista",
                  "count": 1
                },
                {
                  "id": 202,
                  "name": "Custody specialista",
                  "count": 1

                }
              ],
              "count": 2
            }
          ],
          "meta": {
            "duration": 2259,
            "code": "api.ok",
            "message_localized": "Obory byly nalezeny."
          }
        }

+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }


## Channels List [/enums/channels]

### Get Company Channels [GET]

Získá všechny publikační kanály, na kterých může daná firma publikovat inzeráty. Při filtraci inzerátu lze pak ID kanálu používat jako argument.

#### Requirements

   + Authorization with token
   + token type: `full_access` 
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": 1,
              "name": "Pozice v Recruitisu (interní pozice)"
            },
            {
              "id": 2,
              "name": "Kariérní stránky"
            },
            {
              "id": 54,
              "name": "XML export \"JobSite\""
            }
          ],
          "meta": {
            "duration": 2259,
            "code": "api.ok",
            "message_localized": "Publikační kanály byly nalezeny."
          }
        }

+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }
        
## Sources List [/enums/sources]

### Get Company Sources [GET]

Vrátí veškeré zdroje a jejich ID. Zdroje mohou být jak definovány samotným systémem, tak i přidány manuálně, firmou.

#### Requirements

   + Authorization with token
   + token type: `public_token` 
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": 1,
              "label": "Neznámý",
              "type": "unknown"
            },
            {
              "id": 2,
              "label": "pracevhradci.cz",
              "type": "portal"
            },
            {
              "id": 3,
              "label": "pracevpraze.cz",
              "type": "portal"
            },
            {
              "id": 32,
              "label": "XML \"JobSite\"",
              "type": "xml"
            },
            {
              "id": 1063,
              "label": "Osobní předání",
              "type": "manual"
            }
          ],
          "meta": {
            "duration": 2259,
            "code": "api.ok",
            "message_localized": "Zdroje byly nalezeny."
          }
        }

+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }
        
 
## Filter List  [/enums/filters]

**Deprecated**: Namásto toho používejte volání `GET` `filters/`

### Get filters [GET]

Vrací veškeré filtry, které jsou definované pro filtraci inzerátů. 
ID tohoto prvku se následně použije při filtraci inzerátů (volání `jobs` s parametrem `filter_id`)

#### Requirements

   + Authorization with token
   + token type: `public_token`
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": "6",
              "name": "Ošetřovna",
              "group": "oddělení"
            },
            {
              "id": "7",
              "name": "Gynekologie",
              "group": "oddělení"
            },
            {
              "id": "8",
              "name": "ORL",
              "group": "oddělení"
            },
            {
              "id": "5",
              "name": "Jednosměný",
              "group": "Smanný provoz"
            },
            {
              "id": "9",
              "name": "Dvousměnný",
              "group": "Smanný provoz"
            },
            {
              "id": "12",
              "name": "Nepřetržitý",
              "group": "Smanný provoz"
            }
          ],
          "meta": {
            "duration": 320,
            "code": "api.found",
            "message": "Filter enumeration is returned."
          }
        }

+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }


## Office List [/enums/offices]
### Get offices [GET]

Vrací veškeré pobočky dané společnosti
ID tohoto prvku se následně použije při filtraci inzerátů (volání `jobs` s parametrem `office_id`)

#### Requirements

   + Authorization with token
   + token type: `public_token`
    
+ Response 200 (application/json)

        {
          "payload": [
            {
              "id": "2744238",
              "street": null,
              "city": "Domažlice",
              "region": "Plzeňský kraj",
              "state": "CZ",
              "psc": "34401",
              "name": null,
              "about": null,
              "logo": null
            },
            {
              "id": "2744239",
              "street": "Vrchlického 5/161",
              "city": "Praha",
              "region": "Hlavní město Praha",
              "state": "CZ",
              "psc": "15000",
              "name": "SubFirma #1",
              "about": null,
              "logo": "https://app.recruitis.io/upload/companies/loga/38c93a3440463afcf43bdb75d5e7afb2.jpg"
            },
            {
              "id": "2744240",
              "street": null,
              "city": "Praha",
              "region": "Hlavní město Praha",
              "state": "CZ",
              "psc": null,
              "name": null,
              "about": null,
              "logo": null
            }
          ],
          "meta": {
            "duration": 2259,
            "code": "api.ok",
            "message": "Offices enumeration is returned"
          }
        }

+ Response 401 (application/json)

        {
          "payload": null,
          "meta": {
            "duration": "139.58",
            "total_duration": 440,
            "code": "api.error.unauthorized",
            "message": "Musíte být přihlášen"
          }
        }
